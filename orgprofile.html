<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ONE Local - Org Profile</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,700|Playfair+Display&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <style>
    body {
      margin: 0;
      overflow-x: hidden;
      scrollbar-color: #a8d5ba #ffffff;
      scrollbar-width: thin;
    }
    body::-webkit-scrollbar {
      width: 8px;
    }
    body::-webkit-scrollbar-thumb {
      background-color: #a8d5ba;
      border-radius: 4px;
    }
    .animatedBackground {
      background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
      min-height: 100vh;
      color: #333;
    }
    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    #root {
      padding-top: 70px;
    }
    .chatContainer {
      max-height: 60vh;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      padding: 1rem;
      background: #f9f9f9;
      border-radius: 10px;
    }
    .chatMessage {
      display: flex;
      align-items: flex-start;
      margin-bottom: 1rem;
    }
    .chatMessage .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 1rem;
    }
    .chatMessage .bubble {
      max-width: 80%;
      padding: 0.5rem 1rem;
      border-radius: 15px;
      background: #e0f7fa;
      color: #333;
      font-size: 1rem;
      word-wrap: break-word;
    }
    .chatInputContainer {
      display: flex;
      align-items: center;
      margin-top: 1rem;
      background: #ffffff;
      padding: 0.5rem;
      border-radius: 10px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .chatInput {
      flex-grow: 1;
      border: none;
      outline: none;
      font-size: 1rem;
      padding: 0.5rem;
    }
    .chatSendButton {
      margin-left: 0.5rem;
      background-color: #6d4c41;
      color: white;
      border: none;
      outline: none;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .chatSendButton:hover {
      background-color: #8d6e63;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <!-- React 18 and ReactDOM 18 -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <!-- Babel for JSX transformation -->
  <script src="https://unpkg.com/@babel/standalone@7/babel.min.js"></script>
  <!-- Material UI v5 -->
  <script src="https://unpkg.com/@mui/material@5.11.0/umd/material-ui.development.js" crossorigin></script>
  <!-- Material UI Icons -->
  <script src="https://unpkg.com/@mui/icons-material@5.11.0/umd/material-ui-icons.development.js" crossorigin></script>

  <script type="text/babel">
    const {
      ThemeProvider,
      createTheme,
      CssBaseline,
      AppBar,
      Toolbar,
      Typography,
      Tabs,
      Tab,
      Container,
      Paper,
      Box,
      Grid,
    } = MaterialUI;

    // ======================= Example Org Data =======================
    const org = {
      name: "ONE Local",
      tagline: "Empower Your Community, Enrich Your Life.",
    };

    const chatMessages = [
      {
        id: 1,
        sender: "Leif",
        avatar: "https://randomuser.me/api/portraits/men/31.jpg",
        message: "Hi everyone! Excited for the potluck this weekend?",
      },
      {
        id: 2,
        sender: "Miranda",
        avatar: "https://randomuser.me/api/portraits/women/32.jpg",
        message: "Yes! I'll be bringing a vegan lasagna. How about you?",
      },
      {
        id: 3,
        sender: "Cameron",
        avatar: "https://randomuser.me/api/portraits/men/33.jpg",
        message: "I'm in charge of drinks. Any preferences?",
      },
    ];

    // ======================= Custom Theme =======================
    const theme = createTheme({
      palette: {
        mode: 'light',
        primary: {
          main: '#6d4c41',
        },
        secondary: {
          main: '#8d6e63',
        },
        background: {
          default: '#f5f5f5',
        },
      },
      typography: {
        fontFamily: 'Montserrat, sans-serif',
        h4: {
          fontFamily: 'Playfair Display, serif',
          fontWeight: 700,
          fontSize: '2.5rem',
        },
        body1: {
          fontSize: '1.2rem',
        },
      },
      shape: {
        borderRadius: 10,
      },
    });

    // ======================= Main App =======================
    function App() {
      const [currentTab, setCurrentTab] = React.useState(0);

      const renderTabContent = () => {
        switch (currentTab) {
          case 0:
            return (
              <Paper elevation={3} sx={{ p: 2 }}>
                <Typography variant="h5">Welcome to {org.name}!</Typography>
                <Typography variant="body1" sx={{ mt: 2 }}>
                  {org.tagline}
                </Typography>
              </Paper>
            );
          case 1:
            return <ChatTab />;
          default:
            return null;
        }
      };

      return (
        <ThemeProvider theme={theme}>
          <CssBaseline />
          <AppBar position="sticky">
            <Toolbar>
              <Typography variant="h6" sx={{ flexGrow: 1 }}>
                {org.name}
              </Typography>
            </Toolbar>
          </AppBar>
          <Container sx={{ pt: 4 }}>
            <Tabs
              value={currentTab}
              onChange={(e, newValue) => setCurrentTab(newValue)}
              indicatorColor="primary"
              textColor="primary"
              centered
            >
              <Tab label="Home" />
              <Tab label="Chat" />
            </Tabs>
            <Box sx={{ mt: 4 }}>{renderTabContent()}</Box>
          </Container>
        </ThemeProvider>
      );
    }

    // ======================= Chat Tab =======================
    function ChatTab() {
      const [messages, setMessages] = React.useState(chatMessages);
      const [newMessage, setNewMessage] = React.useState("");

      const handleSendMessage = () => {
        if (newMessage.trim() === "") return;

        const newChatMessage = {
          id: messages.length + 1,
          sender: "You",
          avatar: "https://via.placeholder.com/40?text=You",
          message: newMessage,
        };

        setMessages([...messages, newChatMessage]);
        setNewMessage("");
      };

      return (
        <Box>
          <Box className="chatContainer">
            {messages.map((msg) => (
              <Box key={msg.id} className="chatMessage">
                <img
                  src={msg.avatar}
                  alt={`${msg.sender} avatar`}
                  className="avatar"
                />
                <Box className="bubble">
                  <Typography variant="body1">
                    <strong>{msg.sender}:</strong> {msg.message}
                  </Typography>
                </Box>
              </Box>
            ))}
          </Box>
          <Box className="chatInputContainer">
            <input
              type="text"
              placeholder="Type a message..."
              className="chatInput"
              value={newMessage}
              onChange={(e) => setNewMessage(e.target.value)}
              onKeyDown={(e) => e.key === "Enter" && handleSendMessage()}
            />
            <button className="chatSendButton" onClick={handleSendMessage}>
              Send
            </button>
          </Box>
        </Box>
      );
    }

    // ======================= Render App =======================
    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
