<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ONE Local - Org Profile</title>
  <!-- Responsive Meta Tag -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Google Fonts and Material Icons -->
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,700|Playfair+Display&display=swap"
  >
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/icon?family=Material+Icons"
  >
  <style>
    /* Scrollbar Styling */
    body {
      margin: 0;
      overflow-x: hidden;
      scrollbar-color: #a8d5ba #ffffff;
      scrollbar-width: thin;
    }

    /* Modal Content Styling */
    .modalContent {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 90%;
      max-width: 600px;
      background-color: #ffffff;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
      padding: 20px;
      outline: none;
    }

    /* Chat Styles */
    .chatContainer {
      display: flex;
      flex-direction: column;
      height: 400px;
      border: 1px solid #ddd;
      border-radius: 10px;
      overflow: hidden;
      background-color: #ffffff;
    }
    .chatMessages {
      flex: 1;
      overflow-y: auto;
      padding: 10px;
      background-color: #f9f9f9;
      scrollbar-width: thin;
    }
    .chatMessages::-webkit-scrollbar {
      width: 8px;
    }
    .chatMessages::-webkit-scrollbar-thumb {
      background-color: #ddd;
      border-radius: 10px;
    }
    .chatInputContainer {
      display: flex;
      padding: 10px;
      background-color: #fff;
    }
    .chatInput {
      flex: 1;
      border: 1px solid #ddd;
      border-radius: 20px;
      padding: 10px;
      font-size: 1rem;
    }
    .chatSendButton {
      margin-left: 10px;
      border: none;
      background-color: #6d4c41;
      color: white;
      border-radius: 20px;
      padding: 10px 20px;
      cursor: pointer;
    }
    .chatSendButton:hover {
      background-color: #8d6e63;
    }
    .chatMessage {
      margin-bottom: 10px;
    }
    .chatMessage.sender {
      text-align: right;
      color: #6d4c41;
    }
    .chatMessage.recipient {
      text-align: left;
      color: #333;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone@7/babel.min.js"></script>
  <script
    src="https://unpkg.com/@mui/material@5.11.0/umd/material-ui.development.js"
    crossorigin
  ></script>
  <script
    src="https://unpkg.com/@mui/icons-material@5.11.0/umd/material-ui-icons.development.js"
    crossorigin
  ></script>

  <script type="text/babel">
    const {
      ThemeProvider,
      createTheme,
      CssBaseline,
      AppBar,
      Toolbar,
      Typography,
      Container,
      Box,
      Tabs,
      Tab,
      Paper,
      Button,
    } = MaterialUI;

    // ======================= Example Data =======================
    const org = {
      name: "ONE Local",
      tagline: "Empower Your Community, Enrich Your Life.",
    };

    // ======================= Custom Theme =======================
    const theme = createTheme({
      palette: {
        primary: { main: "#6d4c41" },
        secondary: { main: "#8d6e63" },
      },
      typography: { fontFamily: "Montserrat, sans-serif" },
    });

    // ======================= Main App =======================
    function App() {
      return (
        <ThemeProvider theme={theme}>
          <CssBaseline />
          <OrgProfilePage />
        </ThemeProvider>
      );
    }

    // ======================= Org Profile Page =======================
    function OrgProfilePage() {
      const [currentTab, setCurrentTab] = React.useState(0);

      // Chat messages state
      const [messages, setMessages] = React.useState([
        { sender: "recipient", text: "Welcome to ONE Local chat!" },
        { sender: "recipient", text: "How can we assist you today?" },
      ]);

      // Handle sending a chat message
      const sendMessage = (text) => {
        if (text.trim() === "") return;
        setMessages((prev) => [...prev, { sender: "sender", text }]);
      };

      // Renders content for each tab
      const renderTabContent = () => {
        switch (currentTab) {
          case 0: // About
            return (
              <Paper elevation={2} sx={{ p: 2 }}>
                <Typography variant="h5">About {org.name}</Typography>
                <Typography variant="body1">{org.tagline}</Typography>
              </Paper>
            );
          case 1: // Chat
            return <Chat messages={messages} onSend={sendMessage} />;
          default:
            return null;
        }
      };

      return (
        <Container maxWidth="md" sx={{ mt: 4 }}>
          {/* Org Header */}
          <Box sx={{ mb: 4 }}>
            <Typography variant="h4">{org.name}</Typography>
            <Typography variant="body1" color="textSecondary">
              {org.tagline}
            </Typography>
          </Box>

          {/* Tabs */}
          <Tabs
            value={currentTab}
            onChange={(e, newVal) => setCurrentTab(newVal)}
            variant="fullWidth"
            sx={{ mb: 2 }}
          >
            <Tab label="About" />
            <Tab label="Chat" />
          </Tabs>

          {/* Tab Content */}
          {renderTabContent()}
        </Container>
      );
    }

    // ======================= Chat Component =======================
    function Chat({ messages, onSend }) {
      const [input, setInput] = React.useState("");

      const handleSend = () => {
        onSend(input);
        setInput(""); // Clear the input
      };

      const handleKeyPress = (e) => {
        if (e.key === "Enter") handleSend();
      };

      return (
        <Box className="chatContainer">
          {/* Chat Messages */}
          <Box className="chatMessages">
            {messages.map((msg, index) => (
              <Typography
                key={index}
                className={`chatMessage ${msg.sender}`}
                variant="body2"
              >
                {msg.text}
              </Typography>
            ))}
          </Box>

          {/* Chat Input */}
          <Box className="chatInputContainer">
            <input
              type="text"
              className="chatInput"
              placeholder="Type your message..."
              value={input}
              onChange={(e) => setInput(e.target.value)}
              onKeyPress={handleKeyPress}
            />
            <button className="chatSendButton" onClick={handleSend}>
              Send
            </button>
          </Box>
        </Box>
      );
    }

    // ======================= Render the App =======================
    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
