<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ONE Local Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,700|Playfair+Display&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone@7/babel.min.js"></script>
  <script src="https://unpkg.com/@mui/material@5.11.0/umd/material-ui.development.js" crossorigin></script>
  <script src="https://unpkg.com/@mui/icons-material@5.11.0/umd/material-ui-icons.development.js" crossorigin></script>

<style>
    body {
      margin: 0;
      font-family: 'Montserrat', sans-serif;
      background: #f5f5f5; /* Light gray background from landing page */
      color: #333333;  /* Dark gray text color from landing page */
      overflow-x: hidden; /* Prevent horizontal scroll */
      height: 100vh;    /* Ensure full viewport height */
    }
    .app-container { height: 100%; }
</style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const {
      ThemeProvider, createTheme, CssBaseline, AppBar, Toolbar, Typography,
      InputBase, Avatar, Box, Tabs, Tab, Grid, Paper,
      List, ListItem, ListItemText, Modal, Fade, Backdrop,
    } = MaterialUI;

        // Custom Theme from Landing Page
    const theme = createTheme({
      // ... (same theme as landing page, include it here)
       palette: {
        mode: 'light',
        primary: {
          main: '#6d4c41', // Muted Brown
        },
        secondary: {
          main: '#8d6e63', // Muted Coral
        },
        error: {
          main: '#e57373', // Soft Red
        },
        background: {
          default: '#f5f5f5', // Light Gray
          paper: '#ffffff', // White
        },
        text: {
          primary: '#333333', // Dark Gray
          secondary: '#555555', // Medium Gray
        },
      },
      typography: {
        fontFamily: 'Montserrat, sans-serif',
        fontWeightBold: 700,
        h2: {
          fontFamily: 'Playfair Display, serif',
          fontWeight: 700,
          fontSize: '3rem',
        },
        h4: {
          fontFamily: 'Playfair Display, serif',
          fontWeight: 700,
          fontSize: '2.5rem',
        },
        h5: {
          fontSize: '2rem',
        },
        body1: {
          fontSize: '1.2rem',
        },
        body2: {
          fontSize: '1rem',
        },
      },
      shape: {
        borderRadius: 10,
      }, // ... rest of the theme
    });

    function App() {
      // ... (rest of the App component code)

      return (
        <ThemeProvider theme={theme}>
          <CssBaseline />
            <div className="app-container"> {/* Use MUI Box for main container */}

          <AppBar position="static" color="transparent" sx={{ boxShadow: 'none' }}> {/* Transparent AppBar */}
            <Toolbar>
              <Typography variant="h6" component="div" sx={{ flexGrow: 1, fontWeight: 'bold' }}>
                ONE Global
              </Typography>
              <InputBase
                placeholder="Search"
                value={searchText}
                onChange={(e) => setSearchText(e.target.value)}
              />
              <Avatar alt="User Avatar" src="https://randomuser.me/api/portraits/men/75.jpg" /> {/* Use Avatar component */}
            </Toolbar>
          </AppBar>

          <Box sx={{ display: 'flex', overflowX: 'auto', p: 2, bgcolor: 'background.paper' }}> {/* Use MUI Box with bgcolor */}
            {avatars.map((src, index) => (
              <Avatar key={index} alt={`Avatar ${index}`} src={src} sx={{ mr: 2 }} />
            ))}
          </Box>

          <Tabs value={activeTab} onChange={(e, newValue) => setActiveTab(newValue)} centered> {/* Use MUI Tabs */}
            {Object.keys(allPosts).map(tab => (
              <Tab key={tab} label={tab} value={tab} />
            ))}
          </Tabs>

          <Grid container spacing={3} sx={{ p: 3, height: 'calc(100vh - 200px)', overflowY: 'auto' }}> {/* Use MUI Grid */}
            <Grid item xs={12} md={3}>
              <Paper sx={{ p: 2 }}> {/* Use MUI Paper */}
                <Typography variant="h5" gutterBottom>Chats</Typography>
                <List> {/* Use MUI List */}
                  <ListItem>
                    <ListItemText primary="Working Group" secondary="Last message..." />
                  </ListItem>
                  <ListItem>
                    <ListItemText primary="Sales" secondary="New idea..." />
                  </ListItem>
                </List>
              </Paper>
            </Grid>

            <Grid item xs={12} md={6}>
              {filteredPosts.map(post => (
                <Paper key={post.id} sx={{ p: 2, mb: 2, cursor: 'pointer' }} onClick={() => openModal(post)}> {/* Use MUI Paper */}
                  <Typography variant="subtitle1">{post.user} - {post.date}</Typography>
                  <Typography variant="body2">{post.content}</Typography>
                </Paper>
              ))}
            </Grid>

            <Grid item xs={12} md={3}>
              <Paper sx={{ p: 2 }}> {/* Use MUI Paper */}
                <Typography variant="h5" gutterBottom>Map</Typography>
                <Box sx={{ bgcolor: '#073642', height: 200, borderRadius: 1, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>
                  Map Placeholder
                </Box>
              </Paper>
            </Grid>
          </Grid>

          {selectedPost && (
            <Modal
              open={true}
              onClose={closeModal}
              aria-labelledby="modal-modal-title"
              aria-describedby="modal-modal-description"
            >
              <Fade in={true}>
                <Box sx={{ position: 'absolute', top: '50%', left: '50%', transform: 'translate(-50%, -50%)', bgcolor: 'background.paper', boxShadow: 24, p: 4, borderRadius: 1 }}>
                  <Typography id="modal-modal-title" variant="h6" component="h2">
                    {selectedPost.user}
                  </Typography>
                  <Typography id="modal-modal-description" sx={{ mt: 2 }}>
                  <p><strong>Date:</strong> {selectedPost.date}</p>
                  <p>{selectedPost.content}</p>
                  </Typography>
                </Box>
              </Fade>
            </Modal>
          )}
           </div>
        </ThemeProvider>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
