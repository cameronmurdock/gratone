<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ONE Local Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,700|Playfair+Display&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  <script src="https://unpkg.com/@mui/material@5.11.0/umd/material-ui.development.js" crossorigin></script>
  <script src="https://unpkg.com/@mui/icons-material@5.11.0/umd/material-ui-icons.development.js" crossorigin></script>

  <style>
    body {
      margin: 0;
      font-family: 'Montserrat', sans-serif;
      background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
      color: #333; /* Use the theme's text primary color */
    }
    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const {
      ThemeProvider, createTheme, CssBaseline, AppBar, Toolbar, Typography,
      InputBase, Avatar, Box, Tabs, Tab, Grid, Paper, 
      List, ListItem, ListItemAvatar, ListItemText, Divider,
      Modal, Fade, Backdrop, Button, IconButton,
    } = MaterialUI;

        // Custom Theme (using the same theme as the org page)
    const theme = createTheme({ /* ... same theme object as the org page */ });

    function App() {
      // ... (rest of the component code)
      return (
        <ThemeProvider theme={theme}>
          <CssBaseline /> {/* Important for MUI styles */}
          <div className="app-container">
            {/* ... (rest of the JSX) */}
          </div>
        </ThemeProvider>
      );
    }



    function Dashboard({ filteredPosts, openModal }) {
      return (
        <Grid container spacing={2} sx={{ p: 2, height: 'calc(100vh - 140px)', overflowY: 'auto' }}> {/* Adjusted height and added overflow */}
          <Grid item xs={12} md={4}>
            <Paper elevation={3} sx={{ height: '100%', overflowY: 'auto', p: 2 }}> {/* Added Paper and overflow */}
              <Typography variant="h5" sx={{ mb: 2 }}>Chats</Typography>
              <List>
                <ListItem>
                  <ListItemText primary="Working Group" secondary="Last message..." />
                </ListItem>
                <Divider />
                <ListItem>
                  <ListItemText primary="Sales" secondary="New idea..." />
                </ListItem>
              </List>
            </Paper>
          </Grid>
          <Grid item xs={12} md={4}>
            {filteredPosts.map(post => (
              <Paper
                key={post.id}
                elevation={2}
                sx={{ mb: 2, p: 2, cursor: 'pointer' }}
                onClick={() => openModal(post)}
              >
                <ListItem alignItems="flex-start">
                    <ListItemAvatar>
                        <Avatar alt={post.user} src={post.avatar} />
                    </ListItemAvatar>
                    <ListItemText
                        primary={post.user}
                        secondary={
                        <React.Fragment>
                            <Typography
                            sx={{ display: 'inline' }}
                            component="span"
                            variant="body2"
                            color="text.primary"
                            >
                            {post.date}
                            </Typography>
                            {` — ${post.content}`}
                        </React.Fragment>
                        }
                    />
                    </ListItem>
                  
                </Paper>
              ))}
          </Grid>
          <Grid item xs={12} md={4}>
            <Paper elevation={3} sx={{ height: '100%', p: 2 }}>
              <Typography variant="h5" sx={{ mb: 2 }}>Map</Typography>
              <Box sx={{ height: 'calc(100% - 48px)', backgroundColor: '#073642', borderRadius: 1, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>
                Map Placeholder
              </Box>
            </Paper>
          </Grid>
        </Grid>
      );
    }



    function PostModal({ post, closeModal }) {
      return (
        <Modal
          open={!!post} // Open if post is not null
          onClose={closeModal}
          closeAfterTransition
          BackdropComponent={Backdrop}
          BackdropProps={{
            timeout: 500,
          }}
        >
          <Fade in={!!post}>
            <Box className="modalContent" sx={{ width: { xs: '90%', md: '600px' } }}> {/* Use Box instead of div */}
              <IconButton
                aria-label="close"
                onClick={closeModal}
                sx={{ position: 'absolute', right: 8, top: 8, color: (theme) => theme.palette.grey[500], }}
              >
                <Icon>close</Icon>
              </IconButton>
              {post && (
                <>
                  <Typography variant="h5" sx={{ mb: 2 }}>{post.user}</Typography>
                  <Typography sx={{ mb: 1 }}><strong>Date:</strong> {post.date}</Typography>
                  <Typography sx={{ mb: 2 }}>{post.content}</Typography>
                  <Button variant="contained" color="primary" onClick={closeModal}>Close</Button>
                </>
              )}
            </Box>
          </Fade>
        </Modal>
      );
    }

    // ... other components (NavigationBar, AvatarRow, etc.)
    function NavigationBar() {
      return (
        <AppBar position="static">
          <Toolbar>
            <Typography variant="h6" component="div" sx={{ flexGrow: 1 }}>
              ONE Global
            </Typography>
            <InputBase
                placeholder="Search…"
                inputProps={{ 'aria-label': 'search' }}
                sx={{ backgroundColor: 'white', borderRadius: 2, px: 1 }}

              />
            <IconButton color="inherit">
              <Avatar alt="User" src="https://randomuser.me/api/portraits/men/75.jpg" />
            </IconButton>
          </Toolbar>
        </AppBar>
      );
    }
    function AvatarRow({ avatars }) {
        return (
        <Box sx={{ display: 'flex', overflowX: 'auto', bgcolor: '#003642', p: 2, }}>
            {avatars.map((src, index) => (
            <Avatar key={index} alt={`Avatar ${index + 1}`} src={src} sx={{ mr: 1 }} />
            ))}
        </Box>
        );
    }

    function TabPanel({ activeTab, allPosts, setActiveTab }) {
      return (
        <>
            <Tabs value={activeTab} onChange={(event, newValue) => setActiveTab(newValue)} centered sx={{ bgcolor: '#003642', color:'white' }}>
            {Object.keys(allPosts).map((tab) => (
                <Tab key={tab} label={tab} value={tab} sx={{ color:'white', fontWeight: activeTab === tab ? 'bold' : 'normal' }} />
            ))}
            </Tabs>
        </>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);

  </script>
</body>
</html>
