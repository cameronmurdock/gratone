<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>User Profile - ONE Local</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Google Fonts and Material Icons -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,700|Playfair+Display&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  <!-- Material UI CSS -->
  <link rel="stylesheet" href="https://unpkg.com/@mui/material@5.11.0/dist/material-ui.min.css" />
  <style>
    /* Global Styles */
    body, html {
      margin: 0;
      padding: 0;
      font-family: 'Montserrat', sans-serif;
      background: linear-gradient(-45deg, #d1c4e9, #c5cae9, #b3e5fc, #b2dfdb);
      background-size: 400% 400%;
      animation: gradientAnimation 60s ease infinite;
      color: #333333;
      height: 100vh;
      overflow: hidden;
    }
    @keyframes gradientAnimation {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    /* Scrollbar Styling */
    body {
      scrollbar-color: #a8d5ba #ffffff;
      scrollbar-width: thin;
    }
    body::-webkit-scrollbar {
      width: 8px;
    }
    body::-webkit-scrollbar-track {
      background: #ffffff;
    }
    body::-webkit-scrollbar-thumb {
      background-color: #a8d5ba;
      border-radius: 4px;
    }
    /* Modal Content Styling */
    .modalContent {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 90%;
      max-width: 600px;
      background-color: #ffffff;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
      padding: 20px;
      outline: none;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <!-- React, ReactDOM, Babel -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@mui/material@5.11.0/umd/material-ui.development.js" crossorigin></script>
  <script src="https://unpkg.com/@mui/icons-material@5.11.0/umd/material-ui-icons.development.js" crossorigin></script>
  <script src="https://unpkg.com/@mui/styles@5.11.0/umd/material-ui-styles.development.js" crossorigin></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>

  <script type="text/babel">
    const {
      ThemeProvider,
      createTheme,
      CssBaseline,
      Box,
      Grid,
      Typography,
      Button,
      Avatar,
      Tabs,
      Tab,
      Card,
      CardContent,
      CardActions,
      Modal,
      Fade,
      Backdrop,
      IconButton,
      Icon,
      Chip,
    } = MaterialUI;

    // Define a custom theme to match the main site's muted palette
    const theme = createTheme({
      palette: {
        mode: 'light',
        primary: {
          main: '#6d4c41', // Muted Brown
        },
        secondary: {
          main: '#8d6e63', // Muted Coral
        },
        background: {
          default: '#f5f5f5', // Light Gray
          paper: '#ffffff', // White
        },
        text: {
          primary: '#333333', // Dark Gray
          secondary: '#555555', // Medium Gray
        },
        success: {
          main: '#a8d5ba', // Soft Green
        },
      },
      typography: {
        fontFamily: 'Montserrat, sans-serif',
        h1: {
          fontFamily: 'Playfair Display, serif',
          fontWeight: 700,
        },
        h2: {
          fontFamily: 'Playfair Display, serif',
          fontWeight: 700,
        },
        h3: {
          fontFamily: 'Montserrat, sans-serif',
          fontWeight: 700,
        },
        h4: {
          fontFamily: 'Montserrat, sans-serif',
          fontWeight: 700,
        },
        h5: {
          fontFamily: 'Montserrat, sans-serif',
          fontWeight: 700,
        },
        h6: {
          fontFamily: 'Montserrat, sans-serif',
          fontWeight: 700,
        },
        body1: {
          fontFamily: 'Montserrat, sans-serif',
        },
        body2: {
          fontFamily: 'Montserrat, sans-serif',
        },
      },
    });

    // Data Objects
    const userData = {
      name: "Cameron Ely-Murdock",
      role: "Community Leader",
      bio: "Connecting people and resources for a stronger local community.",
      avatar: "https://randomuser.me/api/portraits/men/32.jpg",
      location: "Boulder, CO",
      contact: "cameron@example.com",
      badges: ["Community Leader", "Event Organizer", "Volunteer", "Gardener"],
      posts: [
        { id: 1, content: "Excited for the upcoming community garden project!", date: "2024-04-20" },
        { id: 2, content: "Looking for volunteers for our local park cleanup.", date: "2024-04-15" },
      ],
      services: [
        { id: 1, name: "Yoga Classes", description: "Weekly yoga sessions at the park.", date: "Every Saturday at 9 AM" },
        { id: 2, name: "Mediation Services", description: "Conflict resolution for community disputes.", date: "Available by appointment" },
      ],
      connections: ["Emily Clark", "Tom Baker", "Sarah Johnson"],
      activities: [
        { id: 1, activity: "Hosted a community meetup at Central Park.", date: "2024-04-10" },
        { id: 2, activity: "Volunteered at the local food bank.", date: "2024-04-05" },
      ],
    };

    function UserProfile() {
      const [activeTab, setActiveTab] = React.useState(0);
      const [openModal, setOpenModal] = React.useState(false);
      const [modalContent, setModalContent] = React.useState(null);

      const handleTabChange = (event, newValue) => {
        setActiveTab(newValue);
      };

      const handleOpenModal = (content) => {
        setModalContent(content);
        setOpenModal(true);
      };

      const handleCloseModal = () => {
        setOpenModal(false);
        setModalContent(null);
      };

      const renderContent = () => {
        switch (activeTab) {
          case 0:
            return (
              <Box>
                <Typography variant="h5" gutterBottom>
                  Badges
                </Typography>
                <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>
                  {userData.badges.map((badge, index) => (
                    <Chip key={index} label={badge} color="success" />
                  ))}
                </Box>
              </Box>
            );
          case 1:
            return (
              <Box>
                <Typography variant="h5" gutterBottom>
                  Recent Posts
                </Typography>
                <Grid container spacing={2}>
                  {userData.posts.map(post => (
                    <Grid item xs={12} sm={6} key={post.id}>
                      <Card onClick={() => handleOpenModal(post)} sx={{ cursor: 'pointer', '&:hover': { boxShadow: 6 } }}>
                        <CardContent>
                          <Typography variant="body1">
                            {post.content}
                          </Typography>
                          <Typography variant="caption" color="text.secondary">
                            {new Date(post.date).toLocaleDateString()}
                          </Typography>
                        </CardContent>
                      </Card>
                    </Grid>
                  ))}
                </Grid>
              </Box>
            );
          case 2:
            return (
              <Box>
                <Typography variant="h5" gutterBottom>
                  Services
                </Typography>
                <Grid container spacing={2}>
                  {userData.services.map(service => (
                    <Grid item xs={12} sm={6} key={service.id}>
                      <Card onClick={() => handleOpenModal(service)} sx={{ cursor: 'pointer', '&:hover': { boxShadow: 6 } }}>
                        <CardContent>
                          <Typography variant="h6">
                            {service.name}
                          </Typography>
                          <Typography variant="body2" color="text.secondary">
                            {service.description}
                          </Typography>
                          <Typography variant="caption" color="text.secondary">
                            {service.date}
                          </Typography>
                        </CardContent>
                      </Card>
                    </Grid>
                  ))}
                </Grid>
              </Box>
            );
          case 3:
            return (
              <Box>
                <Typography variant="h5" gutterBottom>
                  Connections
                </Typography>
                <Grid container spacing={1}>
                  {userData.connections.map((conn, index) => (
                    <Grid item key={index}>
                      <Chip label={conn} clickable color="primary" />
                    </Grid>
                  ))}
                </Grid>
              </Box>
            );
          case 4:
            return (
              <Box>
                <Typography variant="h5" gutterBottom>
                  Recent Activities
                </Typography>
                <Grid container spacing={2}>
                  {userData.activities.map(activity => (
                    <Grid item xs={12} sm={6} key={activity.id}>
                      <Card onClick={() => handleOpenModal(activity)} sx={{ cursor: 'pointer', '&:hover': { boxShadow: 6 } }}>
                        <CardContent>
                          <Typography variant="body1">
                            {activity.activity}
                          </Typography>
                          <Typography variant="caption" color="text.secondary">
                            {new Date(activity.date).toLocaleDateString()}
                          </Typography>
                        </CardContent>
                      </Card>
                    </Grid>
                  ))}
                </Grid>
              </Box>
            );
          default:
            return null;
        }
      };

      return (
        <ThemeProvider theme={theme}>
          <CssBaseline />
          <Grid container className="profile-container" sx={{ height: '100vh', overflow: 'hidden' }}>
            {/* Sidebar */}
            <Grid item xs={12} md={4} sx={{ backgroundColor: 'rgba(109, 76, 65, 0.6)', padding: 4, display: 'flex', flexDirection: 'column', alignItems: 'center', borderRight: '2px solid #333' }}>
              <Avatar src={userData.avatar} alt={userData.name} sx={{ width: 120, height: 120, border: '4px solid #fff' }} />
              <Box sx={{ textAlign: 'center', mt: 2 }}>
                <Typography variant="h4">{userData.name}</Typography>
                <Typography variant="h6" color="secondary">{userData.role}</Typography>
                <Typography variant="body1" sx={{ mt: 1 }}>{userData.bio}</Typography>
                <Typography variant="body2" sx={{ mt: 1 }}>
                  <Icon>location_on</Icon> {userData.location}
                </Typography>
                <Typography variant="body2">
                  <Icon>email</Icon> {userData.contact}
                </Typography>
              </Box>
            </Grid>

            {/* Main Content */}
            <Grid item xs={12} md={8} sx={{ padding: 4, overflowY: 'auto' }}>
              <Tabs value={activeTab} onChange={handleTabChange} indicatorColor="primary" textColor="primary" variant="scrollable" scrollButtons="auto">
                <Tab label="Overview" />
                <Tab label="Posts" />
                <Tab label="Services" />
                <Tab label="Connections" />
                <Tab label="Activities" />
              </Tabs>
              <Box sx={{ mt: 4 }}>
                {renderContent()}
              </Box>
            </Grid>
          </Grid>

          {/* Modal */}
          <Modal
            open={openModal}
            onClose={handleCloseModal}
            closeAfterTransition
            BackdropComponent={Backdrop}
            BackdropProps={{
              timeout: 500,
            }}
            aria-labelledby="modal-title"
            aria-describedby="modal-description"
          >
            <Fade in={openModal}>
              <Box className="modalContent">
                {modalContent && (
                  <>
                    <Typography id="modal-title" variant="h5" gutterBottom>
                      {modalContent.name || modalContent.title}
                    </Typography>
                    <Typography id="modal-description" variant="body1" gutterBottom>
                      {modalContent.content || modalContent.description || modalContent.activity || modalContent.date}
                    </Typography>
                    {modalContent.date && (
                      <Typography variant="caption" color="text.secondary">
                        {new Date(modalContent.date).toLocaleDateString()}
                      </Typography>
                    )}
                    <Box sx={{ mt: 2, textAlign: 'right' }}>
                      <Button variant="contained" color="primary" onClick={handleCloseModal}>
                        Close
                      </Button>
                    </Box>
                  </>
                )}
              </Box>
            </Fade>
          </Modal>
        </ThemeProvider>
      </script>
</body>
</html>
